!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Form={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=function(e){return e&&e.Math==Math&&e},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),o={},i=function(e){try{return!!e()}catch(e){return!0}},a=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={},s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!s.call({1:2},1);c.f=u?function(e){var t=l(this,e);return!!t&&t.enumerable}:s;var f,d,p=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,v=function(e){return h.call(e).slice(8,-1)},g=v,m="".split,y=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},b=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==g(e)?m.call(e,""):Object(e)}:Object,x=y,w=function(e){return b(x(e))},_=function(e){return"object"==typeof e?null!==e:"function"==typeof e},E=n,S=function(e){return"function"==typeof e?e:void 0},O=function(e,t){return arguments.length<2?S(E[e]):E[e]&&E[e][t]},A=n,j=O("navigator","userAgent")||"",I=A.process,T=A.Deno,P=I&&I.versions||T&&T.version,L=P&&P.v8;L?d=(f=L.split("."))[0]<4?1:f[0]+f[1]:j&&(!(f=j.match(/Edge\/(\d+)/))||f[1]>=74)&&(f=j.match(/Chrome\/(\d+)/))&&(d=f[1]);var R=d&&+d,C=i,$=!!Object.getOwnPropertySymbols&&!C((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&R&&R<41})),z=$&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,M=O,k=z?function(e){return"symbol"==typeof e}:function(e){var t=M("Symbol");return"function"==typeof t&&Object(e)instanceof t},V=_,q={exports:{}},F=n,N=function(e,t){try{Object.defineProperty(F,e,{value:t,configurable:!0,writable:!0})}catch(r){F[e]=t}return t},D=N,Z="__core-js_shared__",W=n[Z]||D(Z,{}),H=W;(q.exports=function(e,t){return H[e]||(H[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.3",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var U=y,B=function(e){return Object(U(e))},J=B,K={}.hasOwnProperty,Y=Object.hasOwn||function(e,t){return K.call(J(e),t)},G=0,X=Math.random(),Q=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++G+X).toString(36)},ee=n,te=q.exports,re=Y,ne=Q,oe=$,ie=z,ae=te("wks"),ce=ee.Symbol,se=ie?ce:ce&&ce.withoutSetter||ne,le=function(e){return re(ae,e)&&(oe||"string"==typeof ae[e])||(oe&&re(ce,e)?ae[e]=ce[e]:ae[e]=se("Symbol."+e)),ae[e]},ue=_,fe=k,de=function(e,t){var r,n;if("string"===t&&"function"==typeof(r=e.toString)&&!V(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!V(n=r.call(e)))return n;if("string"!==t&&"function"==typeof(r=e.toString)&&!V(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},pe=le("toPrimitive"),he=function(e,t){if(!ue(e)||fe(e))return e;var r,n=e[pe];if(void 0!==n){if(void 0===t&&(t="default"),r=n.call(e,t),!ue(r)||fe(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),de(e,t)},ve=k,ge=function(e){var t=he(e,"string");return ve(t)?t:String(t)},me=_,ye=n.document,be=me(ye)&&me(ye.createElement),xe=function(e){return be?ye.createElement(e):{}},we=xe,_e=!a&&!i((function(){return 7!=Object.defineProperty(we("div"),"a",{get:function(){return 7}}).a})),Ee=a,Se=c,Oe=p,Ae=w,je=ge,Ie=Y,Te=_e,Pe=Object.getOwnPropertyDescriptor;o.f=Ee?Pe:function(e,t){if(e=Ae(e),t=je(t),Te)try{return Pe(e,t)}catch(e){}if(Ie(e,t))return Oe(!Se.f.call(e,t),e[t])};var Le={},Re=_,Ce=function(e){if(!Re(e))throw TypeError(String(e)+" is not an object");return e},$e=a,ze=_e,Me=Ce,ke=ge,Ve=Object.defineProperty;Le.f=$e?Ve:function(e,t,r){if(Me(e),t=ke(t),Me(r),ze)try{return Ve(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var qe=Le,Fe=p,Ne=a?function(e,t,r){return qe.f(e,t,Fe(1,r))}:function(e,t,r){return e[t]=r,e},De={exports:{}},Ze=W,We=Function.toString;"function"!=typeof Ze.inspectSource&&(Ze.inspectSource=function(e){return We.call(e)});var He,Ue,Be,Je=Ze.inspectSource,Ke=Je,Ye=n.WeakMap,Ge="function"==typeof Ye&&/native code/.test(Ke(Ye)),Xe=q.exports,Qe=Q,et=Xe("keys"),tt=function(e){return et[e]||(et[e]=Qe(e))},rt={},nt=Ge,ot=_,it=Ne,at=Y,ct=W,st=tt,lt=rt,ut="Object already initialized",ft=n.WeakMap;if(nt||ct.state){var dt=ct.state||(ct.state=new ft),pt=dt.get,ht=dt.has,vt=dt.set;He=function(e,t){if(ht.call(dt,e))throw new TypeError(ut);return t.facade=e,vt.call(dt,e,t),t},Ue=function(e){return pt.call(dt,e)||{}},Be=function(e){return ht.call(dt,e)}}else{var gt=st("state");lt[gt]=!0,He=function(e,t){if(at(e,gt))throw new TypeError(ut);return t.facade=e,it(e,gt,t),t},Ue=function(e){return at(e,gt)?e[gt]:{}},Be=function(e){return at(e,gt)}}var mt={set:He,get:Ue,has:Be,enforce:function(e){return Be(e)?Ue(e):He(e,{})},getterFor:function(e){return function(t){var r;if(!ot(t)||(r=Ue(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}},yt=n,bt=Ne,xt=Y,wt=N,_t=Je,Et=mt.get,St=mt.enforce,Ot=String(String).split("String");(De.exports=function(e,t,r,n){var o,i=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,c=!!n&&!!n.noTargetGet;"function"==typeof r&&("string"!=typeof t||xt(r,"name")||bt(r,"name",t),(o=St(r)).source||(o.source=Ot.join("string"==typeof t?t:""))),e!==yt?(i?!c&&e[t]&&(a=!0):delete e[t],a?e[t]=r:bt(e,t,r)):a?e[t]=r:wt(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Et(this).source||_t(this)}));var At={},jt=Math.ceil,It=Math.floor,Tt=function(e){return isNaN(e=+e)?0:(e>0?It:jt)(e)},Pt=Tt,Lt=Math.min,Rt=function(e){return e>0?Lt(Pt(e),9007199254740991):0},Ct=Tt,$t=Math.max,zt=Math.min,Mt=w,kt=Rt,Vt=function(e,t){var r=Ct(e);return r<0?$t(r+t,0):zt(r,t)},qt=function(e){return function(t,r,n){var o,i=Mt(t),a=kt(i.length),c=Vt(n,a);if(e&&r!=r){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===r)return e||c||0;return!e&&-1}},Ft={includes:qt(!0),indexOf:qt(!1)},Nt=Y,Dt=w,Zt=Ft.indexOf,Wt=rt,Ht=function(e,t){var r,n=Dt(e),o=0,i=[];for(r in n)!Nt(Wt,r)&&Nt(n,r)&&i.push(r);for(;t.length>o;)Nt(n,r=t[o++])&&(~Zt(i,r)||i.push(r));return i},Ut=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Bt=Ht,Jt=Ut.concat("length","prototype");At.f=Object.getOwnPropertyNames||function(e){return Bt(e,Jt)};var Kt={};Kt.f=Object.getOwnPropertySymbols;var Yt=At,Gt=Kt,Xt=Ce,Qt=O("Reflect","ownKeys")||function(e){var t=Yt.f(Xt(e)),r=Gt.f;return r?t.concat(r(e)):t},er=Y,tr=Qt,rr=o,nr=Le,or=i,ir=/#|\.prototype\./,ar=function(e,t){var r=sr[cr(e)];return r==ur||r!=lr&&("function"==typeof t?or(t):!!t)},cr=ar.normalize=function(e){return String(e).replace(ir,".").toLowerCase()},sr=ar.data={},lr=ar.NATIVE="N",ur=ar.POLYFILL="P",fr=ar,dr=n,pr=o.f,hr=Ne,vr=De.exports,gr=N,mr=function(e,t){for(var r=tr(t),n=nr.f,o=rr.f,i=0;i<r.length;i++){var a=r[i];er(e,a)||n(e,a,o(t,a))}},yr=fr,br=k,xr=function(e){if(br(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)},wr=Ce,_r={},Er=i,Sr=n.RegExp;_r.UNSUPPORTED_Y=Er((function(){var e=Sr("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),_r.BROKEN_CARET=Er((function(){var e=Sr("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));var Or,Ar=Ht,jr=Ut,Ir=Object.keys||function(e){return Ar(e,jr)},Tr=Le,Pr=Ce,Lr=Ir,Rr=a?Object.defineProperties:function(e,t){Pr(e);for(var r,n=Lr(t),o=n.length,i=0;o>i;)Tr.f(e,r=n[i++],t[r]);return e},Cr=O("document","documentElement"),$r=Ce,zr=Rr,Mr=Ut,kr=rt,Vr=Cr,qr=xe,Fr=tt("IE_PROTO"),Nr=function(){},Dr=function(e){return"<script>"+e+"</"+"script>"},Zr=function(e){e.write(Dr("")),e.close();var t=e.parentWindow.Object;return e=null,t},Wr=function(){try{Or=new ActiveXObject("htmlfile")}catch(e){}var e,t;Wr="undefined"!=typeof document?document.domain&&Or?Zr(Or):((t=qr("iframe")).style.display="none",Vr.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Dr("document.F=Object")),e.close(),e.F):Zr(Or);for(var r=Mr.length;r--;)delete Wr.prototype[Mr[r]];return Wr()};kr[Fr]=!0;var Hr,Ur,Br=Object.create||function(e,t){var r;return null!==e?(Nr.prototype=$r(e),r=new Nr,Nr.prototype=null,r[Fr]=e):r=Wr(),void 0===t?r:zr(r,t)},Jr=i,Kr=n.RegExp,Yr=Jr((function(){var e=Kr(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Gr=i,Xr=n.RegExp,Qr=Gr((function(){var e=Xr("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),en=xr,tn=function(){var e=wr(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},rn=_r,nn=q.exports,on=Br,an=mt.get,cn=Yr,sn=Qr,ln=RegExp.prototype.exec,un=nn("native-string-replace",String.prototype.replace),fn=ln,dn=(Hr=/a/,Ur=/b*/g,ln.call(Hr,"a"),ln.call(Ur,"a"),0!==Hr.lastIndex||0!==Ur.lastIndex),pn=rn.UNSUPPORTED_Y||rn.BROKEN_CARET,hn=void 0!==/()??/.exec("")[1];(dn||hn||pn||cn||sn)&&(fn=function(e){var t,r,n,o,i,a,c,s=this,l=an(s),u=en(e),f=l.raw;if(f)return f.lastIndex=s.lastIndex,t=fn.call(f,u),s.lastIndex=f.lastIndex,t;var d=l.groups,p=pn&&s.sticky,h=tn.call(s),v=s.source,g=0,m=u;if(p&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),m=u.slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==u.charAt(s.lastIndex-1))&&(v="(?: "+v+")",m=" "+m,g++),r=new RegExp("^(?:"+v+")",h)),hn&&(r=new RegExp("^"+v+"$(?!\\s)",h)),dn&&(n=s.lastIndex),o=ln.call(p?r:s,m),p?o?(o.input=o.input.slice(g),o[0]=o[0].slice(g),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:dn&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),hn&&o&&o.length>1&&un.call(o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=a=on(null),i=0;i<d.length;i++)a[(c=d[i])[0]]=o[c[1]];return o});var vn=fn;(function(e,t){var r,n,o,i,a,c=e.target,s=e.global,l=e.stat;if(r=s?dr:l?dr[c]||gr(c,{}):(dr[c]||{}).prototype)for(n in t){if(i=t[n],o=e.noTargetGet?(a=pr(r,n))&&a.value:r[n],!yr(s?n:c+(l?".":"#")+n,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;mr(i,o)}(e.sham||o&&o.sham)&&hr(i,"sham",!0),vr(r,n,i,e)}})({target:"RegExp",proto:!0,forced:/./.exec!==vn},{exec:vn});var gn=De.exports,mn=vn,yn=i,bn=le,xn=Ne,wn=bn("species"),_n=RegExp.prototype,En=Tt,Sn=xr,On=y,An=function(e){return function(t,r){var n,o,i=Sn(On(t)),a=En(r),c=i.length;return a<0||a>=c?e?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===c||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):n:e?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},jn={codeAt:An(!1),charAt:An(!0)}.charAt,In=B,Tn=Math.floor,Pn="".replace,Ln=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Rn=/\$([$&'`]|\d{1,2})/g,Cn=v,$n=vn,zn=function(e,t,r,n){var o=bn(e),i=!yn((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),a=i&&!yn((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[wn]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return t=!0,null},r[o](""),!t}));if(!i||!a||r){var c=/./[o],s=t(o,""[e],(function(e,t,r,n,o){var a=t.exec;return a===mn||a===_n.exec?i&&!o?{done:!0,value:c.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}));gn(String.prototype,e,s[0]),gn(_n,o,s[1])}n&&xn(_n[o],"sham",!0)},Mn=i,kn=Ce,Vn=Tt,qn=Rt,Fn=xr,Nn=y,Dn=function(e,t,r){return t+(r?jn(e,t).length:1)},Zn=function(e,t,r,n,o,i){var a=r+e.length,c=n.length,s=Rn;return void 0!==o&&(o=In(o),s=Ln),Pn.call(i,s,(function(i,s){var l;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(a);case"<":l=o[s.slice(1,-1)];break;default:var u=+s;if(0===u)return i;if(u>c){var f=Tn(u/10);return 0===f?i:f<=c?void 0===n[f-1]?s.charAt(1):n[f-1]+s.charAt(1):i}l=n[u-1]}return void 0===l?"":l}))},Wn=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==Cn(e))throw TypeError("RegExp#exec called on incompatible receiver");return $n.call(e,t)},Hn=le("replace"),Un=Math.max,Bn=Math.min,Jn="$0"==="a".replace(/./,"$0"),Kn=!!/./[Hn]&&""===/./[Hn]("a","$0");zn("replace",(function(e,t,r){var n=Kn?"$":"$0";return[function(e,r){var n=Nn(this),o=null==e?void 0:e[Hn];return void 0!==o?o.call(e,n,r):t.call(Fn(n),e,r)},function(e,o){var i=kn(this),a=Fn(e);if("string"==typeof o&&-1===o.indexOf(n)&&-1===o.indexOf("$<")){var c=r(t,i,a,o);if(c.done)return c.value}var s="function"==typeof o;s||(o=Fn(o));var l=i.global;if(l){var u=i.unicode;i.lastIndex=0}for(var f=[];;){var d=Wn(i,a);if(null===d)break;if(f.push(d),!l)break;""===Fn(d[0])&&(i.lastIndex=Dn(a,qn(i.lastIndex),u))}for(var p,h="",v=0,g=0;g<f.length;g++){d=f[g];for(var m=Fn(d[0]),y=Un(Bn(Vn(d.index),a.length),0),b=[],x=1;x<d.length;x++)b.push(void 0===(p=d[x])?p:String(p));var w=d.groups;if(s){var _=[m].concat(b,y,a);void 0!==w&&_.push(w);var E=Fn(o.apply(void 0,_))}else E=Zn(m,a,y,b,w,o);y>=v&&(h+=a.slice(v,y)+E,v=y+m.length)}return h+a.slice(v)}]}),!!Mn((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!Jn||Kn);var Yn={exports:{}};!function(e,r){!function(n){var o=r,i=e&&e.exports==o&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a||(n=a);var c=function(e){this.message=e};(c.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new c(e)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,f={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,o,i=e.length%3,a="",c=-1,u=e.length-i;++c<u;)t=e.charCodeAt(c)<<16,r=e.charCodeAt(++c)<<8,n=e.charCodeAt(++c),a+=l.charAt((o=t+r+n)>>18&63)+l.charAt(o>>12&63)+l.charAt(o>>6&63)+l.charAt(63&o);return 2==i?(t=e.charCodeAt(c)<<8,r=e.charCodeAt(++c),a+=l.charAt((o=t+r)>>10)+l.charAt(o>>4&63)+l.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(c),a+=l.charAt(o>>2)+l.charAt(o<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,o=0,i="",a=-1;++a<t;)n=l.indexOf(e.charAt(a)),r=o%4?64*r+n:n,o++%4&&(i+=String.fromCharCode(255&r>>(-2*o&6)));return i},version:"1.0.0"};if(o&&!o.nodeType)if(i)i.exports=f;else for(var d in f)f.hasOwnProperty(d)&&(o[d]=f[d]);else n.base64=f}(t)}(Yn,Yn.exports);var Gn=Yn.exports;const Xn=new Map;class Qn{static fromJsonObject(e){if(!Xn.has(e.t))throw"unrecognised type "+e.t;return Xn.get(e.t).deserialize(e.c)}static deserialize(e){return new this}validate(e){throw"validate not implemented on "+this.constructor.name}}class eo{constructor(e,t){this._errors=e||[],this._potentiallyValid=t||!1}get errors(){return this._errors}get potentiallyValid(){return this._potentiallyValid}static success(){return new eo([],!0)}static potentiallyValid(e=[]){return new eo(e,!0)}static error(e=[]){return new eo(e,!1)}combine(...e){e.forEach((e=>{e instanceof eo&&(this._errors.push(...e._errors),this._potentiallyValid=this._potentiallyValid&&e._potentiallyValid)}))}}function to(e,t){Xn.set(e,t)}class ro extends Qn{constructor(e=[],t=!1,r=!1){super(),this._allowedValues=e||[],this._caseSensitive=!!t,this._negate=!!r}static deserialize(e){return new this(e.allowedValues||[],!!e.caseSensitive,!!e.negate)}validate(e){if(this._allowedValues.length){const t=new RegExp(this._allowedValues.join("|"),this._caseSensitive?"":"i");if(this._negate^!t.test(e))return eo.error(["not a valid value"])}else if(this._negate^(null!==e&&""!==e))return eo.error(["not a valid value"]);return eo.success()}}class no extends Qn{constructor(e,t="does not match regular expression"){super(),this._pattern=e,this._message=t}static deserialize(e){return new this(e.pattern,e.message)}validate(e){let t=this._pattern;if("string"==typeof t){const e=/\/(.*)\/(.*)/.exec(t);t=new RegExp(e[1],e[2])}return t instanceof RegExp?t.test(e)?eo.success():eo.error([this._message]):eo.error(["not a valid regular expression"])}}function oo(e){return"checkbox"!==e.type&&"radio"!==e.type||e instanceof HTMLSelectElement||e.checked?e.value:null}function io(e,t){return e.querySelector(`.p-form__field[handler-name="${t}"]`)}function ao(e,t,r,n=!1){const o=io(e,t);if(!o)return;let i="valid";r.errors.length>0&&(i=r.potentiallyValid&&!n?"potentially-valid":"invalid"),o.setAttribute("validation-state",i)}function co(e,t){const r=io(e,t);if(!r)return;r.removeAttribute("validation-state");const n=r.querySelector(".p-form__errors");n&&(n.innerHTML="")}function so(e,t,r=[]){if(r.length<=0)return;const n=e.querySelector(`.p-form__field[handler-name="${t}"] .p-form__errors`);if(!n)return void console.error("validation error:",`"${t}"`,r);ao(e,t,eo.error(r));const o=n.querySelector(":scope > ul")||document.createElement("ul");r.forEach((e=>{const t=document.createElement("li");t.innerText=e,o.append(t)})),n.append(o)}function lo(e,t,r=!1){const n=function(e,t){let r=null;const n=io(e,t);if(!n)return r;const o=n.querySelectorAll(`:scope [name="${t}"], :scope [name^="${t}["]`);return 1===o.length?r=oo(o[0]):o.length>1&&(r=[],o.forEach((e=>{const t=oo(e);null!==t&&("]"===e.getAttribute("name").substr(-1)?(r&&"Array"===r.constructor.name||(r=[]),r.push(t)):r=t)}))),r}(e,t),o=io(e,t),i=eo.success();if(!o)return i;try{JSON.parse(Gn.decode(o.getAttribute("validation"))).forEach((e=>{const t=Qn.fromJsonObject(e);i.combine(t.validate(n))}))}catch(e){}return ao(e,t,i,r),i}function uo(e){const t=new Map;if(!e instanceof HTMLFormElement)return console.error("not a form element"),t;return e.querySelectorAll(".p-form__field[validation]").forEach((r=>{const n=r.getAttribute("handler-name"),o=lo(e,n,!0);t.set(n,o)})),t}to("Equal",class extends Qn{constructor(e){super(),this._expect=e}static deserialize(e){return new this(e.expect)}validate(e){return e!==this._expect?eo.error(["value does not match"]):eo.success()}}),to("NotEqual",class extends Qn{constructor(e){super(),this._expect=e}static deserialize(e){return new this(e.expect)}validate(e){return e===this._expect?eo.error(["value must not match"]):eo.success()}}),to("Enum",ro),to("ConstEnum",class extends ro{}),to("Bool",class extends Qn{validate(e){if(null==e)return eo.error(["Invalid boolean value"]);if("boolean"!=typeof e)if("string"==typeof e){if(!/true|false|0|1/.test(e.toLowerCase()))return eo.error(["Invalid boolean value"])}else if("number"==typeof e&&0!==e&&1!==e)return eo.error(["Invalid boolean value"]);return eo.success()}}),to("String",class extends Qn{constructor(e=0,t=0){super(),this._minLength=e,this._maxLength=t}static deserialize(e){return new this(e.minLength,e.maxLength)}validate(e){return"string"!=typeof e?eo.error(["not a valid value"]):this._minLength>0&&e.length<this._minLength?eo.potentiallyValid(["must be at least "+this._minLength+" characters"]):this._maxLength>0&&e.length>this._maxLength?eo.error(["must be no more than "+this._maxLength+" characters"]):eo.success()}}),to("Required",class extends Qn{validate(e){return null==e||""===e?eo.error(["required"]):eo.success()}}),to("Multi",class extends Qn{constructor(e){super(),this._validators=e||[]}static deserialize(e){return new this(e.validators)}validate(e){let t=eo.success();return this._validators.forEach((r=>{const n=Qn.fromObject(r);t.combine(n.validate(e))})),t}}),to("Regex",no),to("Email",class extends no{constructor(e="invalid email address"){super(/^[_a-zA-Z0-9+\-]+(\.[_a-zA-Z0-9+\-]+)*@[a-zA-Z0-9\-]+(\.[a-zA-Z0-9\-]+)*(\.[a-zA-Z]{2,})$/,e)}static deserialize(e){return new this(e.message)}}),to("IPv4",class extends no{constructor(e="invalid IPv4 address"){super("/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",e)}static deserialize(e){return new this(e.message)}});let fo=new WeakSet;function po(e=document){fo.has(e)||(fo.add(e),e.addEventListener("submit",(e=>{const t=e.path&&e.path[0]||e.target;uo(t).forEach(((r,n)=>{const o=t.querySelector(`.p-form__field[handler-name="${n}"] .p-form__errors`);o&&o.classList.toggle("p-form__errors--hidden",0===r.errors.length),r.errors.length>0&&(co(t,n),so(t,n,r.errors),e.preventDefault(),e.stopImmediatePropagation())}))})),e.addEventListener("reset",(e=>{const t=e.path&&e.path[0]||e.target;t.querySelectorAll(".p-form__field[handler-name]").forEach((e=>co(t,e.getAttribute("handler-name"))))})),e.addEventListener("input",(e=>{const t=e.path&&e.path[0]||e.target,r=t.closest(".p-form__field");if(!r||!r.hasAttribute("handler-name"))return;const n=r.getAttribute("handler-name"),o=t.closest("form");if(!o)return;const i=lo(o,n),a=r.querySelector(".p-form__errors");a&&0===i.errors.length?(co(o,n),a.classList.add("p-form__errors--hidden")):i.potentiallyValid||(co(o,n),so(o,n,i.errors))})))}po(),e.addErrors=so,e.clearErrors=co,e.init=po,e.validateForm=uo,e.validateHandler=lo,Object.defineProperty(e,"__esModule",{value:!0})}));
