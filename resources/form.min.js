!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var r,n=function(t){return t&&t.Math==Math&&t},o=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")(),i={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},a=function(t){try{return!!t()}catch(t){return!0}},c={}.toString,s=function(t){return c.call(t).slice(8,-1)},u="".split,l=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?u.call(t,""):Object(t)}:Object,f=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},p=function(t){return l(f(t))},d=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),h=function(t){return"object"==typeof t?null!==t:"function"==typeof t},g=o.document,v=h(g)&&h(g.createElement),y=function(t){return v?g.createElement(t):{}},m=!d&&!a((function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a})),b=function(t){if(!h(t))throw TypeError(String(t)+" is not an object");return t},_=function(t,e){if(!h(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!h(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!h(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!h(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},x=Object.defineProperty,S={f:d?x:function(t,e,r){if(b(t),e=_(e,!0),b(r),m)try{return x(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},E=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},w=d?function(t,e,r){return S.f(t,e,E(1,r))}:function(t,e,r){return t[e]=r,t},A=function(t,e){try{w(o,t,e)}catch(r){o[t]=e}return e},O=o["__core-js_shared__"]||A("__core-js_shared__",{}),L=e((function(t){(t.exports=function(t,e){return O[t]||(O[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),T={}.hasOwnProperty,j=function(t,e){return T.call(t,e)},P=0,I=Math.random(),R=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++P+I).toString(36)},C=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),M=C&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,k=L("wks"),V=o.Symbol,z=M?V:V&&V.withoutSetter||R,N=function(t){return j(k,t)||(C&&j(V,t)?k[t]=V[t]:k[t]=z("Symbol."+t)),k[t]},D=Math.ceil,F=Math.floor,$=function(t){return isNaN(t=+t)?0:(t>0?F:D)(t)},q=Math.min,G=function(t){return t>0?q($(t),9007199254740991):0},U=Math.max,B=Math.min,H=function(t){return function(e,r,n){var o,i=p(e),a=G(i.length),c=function(t,e){var r=$(t);return r<0?U(r+e,0):B(r,e)}(n,a);if(t&&r!=r){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===r)return t||c||0;return!t&&-1}},Z={includes:H(!0),indexOf:H(!1)},K={},Y=Z.indexOf,W=function(t,e){var r,n=p(t),o=0,i=[];for(r in n)!j(K,r)&&j(n,r)&&i.push(r);for(;e.length>o;)j(n,r=e[o++])&&(~Y(i,r)||i.push(r));return i},J=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],X=Object.keys||function(t){return W(t,J)},Q=d?Object.defineProperties:function(t,e){b(t);for(var r,n=X(e),o=n.length,i=0;o>i;)S.f(t,r=n[i++],e[r]);return t},tt=o,et=function(t){return"function"==typeof t?t:void 0},rt=function(t,e){return arguments.length<2?et(tt[t])||et(o[t]):tt[t]&&tt[t][e]||o[t]&&o[t][e]},nt=rt("document","documentElement"),ot=L("keys"),it=function(t){return ot[t]||(ot[t]=R(t))},at=it("IE_PROTO"),ct=function(){},st=function(t){return"<script>"+t+"<\/script>"},ut=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ut=r?function(t){t.write(st("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=y("iframe")).style.display="none",nt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(st("document.F=Object")),t.close(),t.F);for(var n=J.length;n--;)delete ut.prototype[J[n]];return ut()};K[at]=!0;var lt=Object.create||function(t,e){var r;return null!==t?(ct.prototype=b(t),r=new ct,ct.prototype=null,r[at]=t):r=ut(),void 0===e?r:Q(r,e)},ft=N("unscopables"),pt=Array.prototype;null==pt[ft]&&S.f(pt,ft,{configurable:!0,value:lt(null)});var dt=function(t){pt[ft][t]=!0},ht=Function.toString;"function"!=typeof O.inspectSource&&(O.inspectSource=function(t){return ht.call(t)});var gt,vt,yt,mt=O.inspectSource,bt=o.WeakMap,_t="function"==typeof bt&&/native code/.test(mt(bt)),xt=o.WeakMap;if(_t){var St=O.state||(O.state=new xt),Et=St.get,wt=St.has,At=St.set;gt=function(t,e){return e.facade=t,At.call(St,t,e),e},vt=function(t){return Et.call(St,t)||{}},yt=function(t){return wt.call(St,t)}}else{var Ot=it("state");K[Ot]=!0,gt=function(t,e){return e.facade=t,w(t,Ot,e),e},vt=function(t){return j(t,Ot)?t[Ot]:{}},yt=function(t){return j(t,Ot)}}var Lt,Tt,jt,Pt={set:gt,get:vt,has:yt,enforce:function(t){return yt(t)?vt(t):gt(t,{})},getterFor:function(t){return function(e){var r;if(!h(e)||(r=vt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},It={}.propertyIsEnumerable,Rt=Object.getOwnPropertyDescriptor,Ct={f:Rt&&!It.call({1:2},1)?function(t){var e=Rt(this,t);return!!e&&e.enumerable}:It},Mt=Object.getOwnPropertyDescriptor,kt={f:d?Mt:function(t,e){if(t=p(t),e=_(e,!0),m)try{return Mt(t,e)}catch(t){}if(j(t,e))return E(!Ct.f.call(t,e),t[e])}},Vt=e((function(t){var e=Pt.get,r=Pt.enforce,n=String(String).split("String");(t.exports=function(t,e,i,a){var c,s=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||j(i,"name")||w(i,"name",e),(c=r(i)).source||(c.source=n.join("string"==typeof e?e:""))),t!==o?(s?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=i:w(t,e,i)):u?t[e]=i:A(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||mt(this)}))})),zt=J.concat("length","prototype"),Nt={f:Object.getOwnPropertyNames||function(t){return W(t,zt)}},Dt={f:Object.getOwnPropertySymbols},Ft=rt("Reflect","ownKeys")||function(t){var e=Nt.f(b(t)),r=Dt.f;return r?e.concat(r(t)):e},$t=function(t,e){for(var r=Ft(e),n=S.f,o=kt.f,i=0;i<r.length;i++){var a=r[i];j(t,a)||n(t,a,o(e,a))}},qt=/#|\.prototype\./,Gt=function(t,e){var r=Bt[Ut(t)];return r==Zt||r!=Ht&&("function"==typeof e?a(e):!!e)},Ut=Gt.normalize=function(t){return String(t).replace(qt,".").toLowerCase()},Bt=Gt.data={},Ht=Gt.NATIVE="N",Zt=Gt.POLYFILL="P",Kt=Gt,Yt=kt.f,Wt=function(t,e){var r,n,i,a,c,s=t.target,u=t.global,l=t.stat;if(r=u?o:l?o[s]||A(s,{}):(o[s]||{}).prototype)for(n in e){if(a=e[n],i=t.noTargetGet?(c=Yt(r,n))&&c.value:r[n],!Kt(u?n:s+(l?".":"#")+n,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;$t(a,i)}(t.sham||i&&i.sham)&&w(a,"sham",!0),Vt(r,n,a,t)}},Jt=function(t){return Object(f(t))},Xt=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Qt=it("IE_PROTO"),te=Object.prototype,ee=Xt?Object.getPrototypeOf:function(t){return t=Jt(t),j(t,Qt)?t[Qt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?te:null},re=N("iterator"),ne=!1;[].keys&&("next"in(jt=[].keys())?(Tt=ee(ee(jt)))!==Object.prototype&&(Lt=Tt):ne=!0),null==Lt&&(Lt={}),j(Lt,re)||w(Lt,re,(function(){return this}));var oe={IteratorPrototype:Lt,BUGGY_SAFARI_ITERATORS:ne},ie=S.f,ae=N("toStringTag"),ce=function(t,e,r){t&&!j(t=r?t:t.prototype,ae)&&ie(t,ae,{configurable:!0,value:e})},se=oe.IteratorPrototype,ue=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return b(r),function(t){if(!h(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),le=oe.IteratorPrototype,fe=oe.BUGGY_SAFARI_ITERATORS,pe=N("iterator"),de=function(){return this},he=Pt.set,ge=Pt.getterFor("Array Iterator"),ve=function(t,e,r,n,o,i,a){!function(t,e,r){var n=e+" Iterator";t.prototype=lt(se,{next:E(1,r)}),ce(t,n,!1)}(r,e,n);var c,s,u,l=function(t){if(t===o&&g)return g;if(!fe&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},f=e+" Iterator",p=!1,d=t.prototype,h=d[pe]||d["@@iterator"]||o&&d[o],g=!fe&&h||l(o),v="Array"==e&&d.entries||h;if(v&&(c=ee(v.call(new t)),le!==Object.prototype&&c.next&&(ee(c)!==le&&(ue?ue(c,le):"function"!=typeof c[pe]&&w(c,pe,de)),ce(c,f,!0))),"values"==o&&h&&"values"!==h.name&&(p=!0,g=function(){return h.call(this)}),d[pe]!==g&&w(d,pe,g),o)if(s={values:l("values"),keys:i?g:l("keys"),entries:l("entries")},a)for(u in s)(fe||p||!(u in d))&&Vt(d,u,s[u]);else Wt({target:e,proto:!0,forced:fe||p},s);return s}(Array,"Array",(function(t,e){he(this,{type:"Array Iterator",target:p(t),index:0,kind:e})}),(function(){var t=ge(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");dt("keys"),dt("values"),dt("entries");var ye=N("iterator"),me=N("toStringTag"),be=ve.values;for(var _e in i){var xe=o[_e],Se=xe&&xe.prototype;if(Se){if(Se[ye]!==be)try{w(Se,ye,be)}catch(t){Se[ye]=be}if(Se[me]||w(Se,me,_e),i[_e])for(var Ee in ve)if(Se[Ee]!==ve[Ee])try{w(Se,Ee,ve[Ee])}catch(t){Se[Ee]=ve[Ee]}}}var we=function(){var t=b(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Ae(t,e){return RegExp(t,e)}var Oe,Le,Te={UNSUPPORTED_Y:a((function(){var t=Ae("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:a((function(){var t=Ae("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},je=RegExp.prototype.exec,Pe=String.prototype.replace,Ie=je,Re=(Oe=/a/,Le=/b*/g,je.call(Oe,"a"),je.call(Le,"a"),0!==Oe.lastIndex||0!==Le.lastIndex),Ce=Te.UNSUPPORTED_Y||Te.BROKEN_CARET,Me=void 0!==/()??/.exec("")[1];(Re||Me||Ce)&&(Ie=function(t){var e,r,n,o,i=this,a=Ce&&i.sticky,c=we.call(i),s=i.source,u=0,l=t;return a&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),l=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(s="(?: "+s+")",l=" "+l,u++),r=new RegExp("^(?:"+s+")",c)),Me&&(r=new RegExp("^"+s+"$(?!\\s)",c)),Re&&(e=i.lastIndex),n=je.call(a?r:i,l),a?n?(n.input=n.input.slice(u),n[0]=n[0].slice(u),n.index=i.lastIndex,i.lastIndex+=n[0].length):i.lastIndex=0:Re&&n&&(i.lastIndex=i.global?n.index+n[0].length:e),Me&&n&&n.length>1&&Pe.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n});var ke=Ie;Wt({target:"RegExp",proto:!0,forced:/./.exec!==ke},{exec:ke});var Ve=N("species"),ze=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Ne="$0"==="a".replace(/./,"$0"),De=N("replace"),Fe=!!/./[De]&&""===/./[De]("a","$0"),$e=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),qe=function(t){return function(e,r){var n,o,i=String(f(e)),a=$(r),c=i.length;return a<0||a>=c?t?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===c||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):n:t?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},Ge={codeAt:qe(!1),charAt:qe(!0)}.charAt,Ue=function(t,e,r){return e+(r?Ge(t,e).length:1)},Be=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==s(t))throw TypeError("RegExp#exec called on incompatible receiver");return ke.call(t,e)},He=Math.max,Ze=Math.min,Ke=Math.floor,Ye=/\$([$&'`]|\d\d?|<[^>]*>)/g,We=/\$([$&'`]|\d\d?)/g;!function(t,e,r,n){var o=N(t),i=!a((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),c=i&&!a((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Ve]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!c||"replace"===t&&(!ze||!Ne||Fe)||"split"===t&&!$e){var s=/./[o],u=r(o,""[t],(function(t,e,r,n,o){return e.exec===ke?i&&!o?{done:!0,value:s.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:Ne,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Fe}),l=u[0],f=u[1];Vt(String.prototype,t,l),Vt(RegExp.prototype,o,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}n&&w(RegExp.prototype[o],"sham",!0)}("replace",2,(function(t,e,r,n){var o=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=n.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(r,n){var o=f(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,o,n):e.call(String(o),r,n)},function(t,n){if(!o&&i||"string"==typeof n&&-1===n.indexOf(a)){var s=r(e,t,this,n);if(s.done)return s.value}var u=b(t),l=String(this),f="function"==typeof n;f||(n=String(n));var p=u.global;if(p){var d=u.unicode;u.lastIndex=0}for(var h=[];;){var g=Be(u,l);if(null===g)break;if(h.push(g),!p)break;""===String(g[0])&&(u.lastIndex=Ue(l,G(u.lastIndex),d))}for(var v,y="",m=0,_=0;_<h.length;_++){g=h[_];for(var x=String(g[0]),S=He(Ze($(g.index),l.length),0),E=[],w=1;w<g.length;w++)E.push(void 0===(v=g[w])?v:String(v));var A=g.groups;if(f){var O=[x].concat(E,S,l);void 0!==A&&O.push(A);var L=String(n.apply(void 0,O))}else L=c(x,l,S,E,A,n);S>=m&&(y+=l.slice(m,S)+L,m=S+x.length)}return y+l.slice(m)}];function c(t,r,n,o,i,a){var c=n+t.length,s=o.length,u=We;return void 0!==i&&(i=Jt(i),u=Ye),e.call(a,u,(function(e,a){var u;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(c);case"<":u=i[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>s){var f=Ke(l/10);return 0===f?e:f<=s?void 0===o[f-1]?a.charAt(1):o[f-1]+a.charAt(1):e}u=o[l-1]}return void 0===u?"":u}))}}));var Je=e((function(e,r){!function(n){var o=r,i=e&&e.exports==o&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a||(n=a);var c=function(t){this.message=t};(c.prototype=new Error).name="InvalidCharacterError";var s=function(t){throw new c(t)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,f={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var e,r,n,o,i=t.length%3,a="",c=-1,l=t.length-i;++c<l;)e=t.charCodeAt(c)<<16,r=t.charCodeAt(++c)<<8,n=t.charCodeAt(++c),a+=u.charAt((o=e+r+n)>>18&63)+u.charAt(o>>12&63)+u.charAt(o>>6&63)+u.charAt(63&o);return 2==i?(e=t.charCodeAt(c)<<8,r=t.charCodeAt(++c),a+=u.charAt((o=e+r)>>10)+u.charAt(o>>4&63)+u.charAt(o<<2&63)+"="):1==i&&(o=t.charCodeAt(c),a+=u.charAt(o>>2)+u.charAt(o<<4&63)+"=="),a},decode:function(t){var e=(t=String(t).replace(l,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,o=0,i="",a=-1;++a<e;)n=u.indexOf(t.charAt(a)),r=o%4?64*r+n:n,o++%4&&(i+=String.fromCharCode(255&r>>(-2*o&6)));return i},version:"1.0.0"};if(o&&!o.nodeType)if(i)i.exports=f;else for(var p in f)f.hasOwnProperty(p)&&(o[p]=f[p]);else n.base64=f}(t)}));function Xe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Qe=new Map;class tr{static fromJsonObject(t){if(!Qe.has(t.t))throw"unrecognised type "+t.t;return Qe.get(t.t).deserialize(t.c)}static deserialize(t){return new this}validate(t){throw"validate not implemented on "+this.constructor.name}}class er{constructor(t,e){Xe(this,"errors",[]),Xe(this,"potentiallyValid",!1),this.errors=t,this.potentiallyValid=e}static success(){return new er([],!0)}static potentiallyValid(t=[]){return new er(t,!0)}static error(t=[]){return new er(t,!1)}combine(...t){t.forEach(t=>{t instanceof er&&(this.errors.push(...t.errors),this.potentiallyValid=this.potentiallyValid&&t.potentiallyValid)})}}function rr(t,e){Qe.set(t,e)}class nr extends tr{constructor(t=[],e=!1,r=!1){super(),Xe(this,"_allowedValues",[]),Xe(this,"_negate",!1),Xe(this,"_caseSensitive",!0),this._allowedValues=t,this._caseSensitive=e,this._negate=r}static deserialize(t){return new this(t.allowedValues||[],!!t.caseSensitive,!!t.negate)}validate(t){if(this._allowedValues.length){const e=new RegExp(this._allowedValues.join("|"),this._caseSensitive?"":"i");if(this._negate^!e.test(t))return er.error(["not a valid value"])}else if(this._negate^(null!==t&&""!==t))return er.error(["not a valid value"]);return er.success()}}class or extends tr{constructor(t,e="does not match regular expression"){super(),Xe(this,"_pattern",null),Xe(this,"_message",null),this._pattern=t,this._message=e}static deserialize(t){return new this(t.pattern,t.message)}validate(t){let e=this._pattern;if("string"==typeof e){const t=/\/(.*)\/(.*)/.exec(e);e=new RegExp(t[1],t[2])}return e instanceof RegExp?e.test(t)?er.success():er.error([this._message]):er.error(["not a valid regular expression"])}}function ir(t){return"checkbox"!==t.type&&"radio"!==t.type||t instanceof HTMLSelectElement||t.checked?t.value:null}function ar(t,e){return t.querySelector('.p-form__field[handler-name="'.concat(e,'"]'))}function cr(t,e){const r=t.querySelector('.p-form__field[handler-name="'.concat(e,'"] .p-form__errors'));r&&(r.innerHTML="")}function sr(t,e,r=[]){if(r.length<=0)return;const n=t.querySelector('.p-form__field[handler-name="'.concat(e,'"] .p-form__errors'));if(!n)return void console.error("validation error:",'"'.concat(e,'"'),r);const o=n.querySelector(":scope > ul")||document.createElement("ul");r.forEach(t=>{const e=document.createElement("li");e.innerText=t,o.append(e)}),n.append(o)}function ur(t,e,r=!1){const n=function(t,e){let r=null;const n=ar(t,e);if(!n)return r;const o=n.querySelectorAll(':scope [name="'.concat(e,'"],[name^="').concat(e,'["]'));return 1===o.length?r=ir(o[0]):o.length>1&&(r=[],o.forEach(t=>{const e=ir(t);null!==e&&("]"===t.getAttribute("name").substr(-1)?(r&&"Array"===r.constructor.name||(r=[]),r.push(e)):r=e)})),r}(t,e),o=ar(t,e),i=er.success();if(!o)return i;try{JSON.parse(Je.decode(o.getAttribute("validation"))).forEach(t=>{const e=tr.fromJsonObject(t);i.combine(e.validate(n))})}catch(t){}return function(t,e,r,n=!1){const o=ar(t,e);if(!o)return;let i="valid";r.errors.length>0&&(i=r.potentiallyValid&&!n?"potentially-valid":"invalid"),o.setAttribute("validation-state",i)}(t,e,i,r),i}rr("Equal",class extends tr{constructor(t){super(),Xe(this,"_expect",null),this._expect=t}static deserialize(t){return new this(t.expect)}validate(t){return t!==this._expect?er.error(["value does not match"]):er.success()}}),rr("NotEqual",class extends tr{constructor(t){super(),Xe(this,"_expect",null),this._expect=t}static deserialize(t){return new this(t.expect)}validate(t){return t===this._expect?er.error(["value must not match"]):er.success()}}),rr("Enum",nr),rr("ConstEnum",class extends nr{}),rr("Bool",class extends tr{validate(t){if(null==t)return er.error(["Invalid boolean value"]);if("boolean"!=typeof t)if("string"==typeof t){if(!/true|false|0|1/.test(t.toLowerCase()))return er.error(["Invalid boolean value"])}else if("number"==typeof t&&0!==t&&1!==t)return er.error(["Invalid boolean value"]);return er.success()}}),rr("String",class extends tr{constructor(t=0,e=0){super(),Xe(this,"_minLength",null),Xe(this,"_maxLength",null),this._minLength=t,this._maxLength=e}static deserialize(t){return new this(t.minLength,t.maxLength)}validate(t){return"string"!=typeof t?er.error(["not a valid value"]):this._minLength>0&&t.length<this._minLength?er.potentiallyValid(["must be at least "+this._minLength+" characters"]):this._maxLength>0&&t.length>this._maxLength?er.error(["must be no more than "+this._maxLength+" characters"]):er.success()}}),rr("Required",class extends tr{validate(t){return null==t||""===t?er.error(["required"]):er.success()}}),rr("Multi",class extends tr{constructor(t){super(),Xe(this,"_validators",[]),this._validators=t}static deserialize(t){return new this(t.validators)}validate(t){let e=er.success();return this._validators.forEach(r=>{const n=tr.fromObject(r);e.combine(n.validate(t))}),e}}),rr("Regex",or),rr("Email",class extends or{constructor(t="invalid email address"){super(/^[_a-zA-Z0-9+\-]+(\.[_a-zA-Z0-9+\-]+)*@[a-zA-Z0-9\-]+(\.[a-zA-Z0-9\-]+)*(\.[a-zA-Z]{2,})$/,t)}static deserialize(t){return new this(t.message)}}),rr("IPv4",class extends or{constructor(t="invalid IPv4 address"){super("/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",t)}static deserialize(t){return new this(t.message)}}),document.addEventListener("submit",t=>{const e=t.target;(function(t){const e=new Map;return!t instanceof HTMLFormElement?(console.error("not a form element"),e):(t.querySelectorAll(".p-form__field[validation]").forEach(r=>{const n=r.getAttribute("handler-name"),o=ur(t,n,!0);e.set(n,o)}),e)})(e).forEach((r,n)=>{const o=t.target.querySelector('.p-form__field[handler-name="'.concat(n,'"] .p-form__errors'));o&&o.classList.toggle("p-form__errors--hidden",0===r.errors.length),r.errors.length>0&&(cr(e,n),sr(e,n,r.errors),t.preventDefault())})}),document.addEventListener("input",t=>{const e=t.target,r=e.closest(".p-form__field");if(!r||!r.hasAttribute("handler-name"))return;const n=r.getAttribute("handler-name"),o=e.closest("form");if(!o)return;const i=ur(o,n),a=o.querySelector('.p-form__field[handler-name="'.concat(n,'"] .p-form__errors'));a&&0===i.errors.length?(cr(o,n),a.classList.add("p-form__errors--hidden")):i.potentiallyValid||(cr(o,n),sr(o,n,i.errors))})}();
